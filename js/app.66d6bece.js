(function(e){function t(t){for(var r,i,c=t[0],s=t[1],l=t[2],d=0,v=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&v.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(v.length)v.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("8a23"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:"",flat:""}},[n("div",{staticClass:"d-flex align-center flex-shrink-0",on:{dblclick:e.openTerminal,click:function(t){return e.doubleClick(t)}}},[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-bluetooth")]),n("h1",{staticClass:"text-h6",staticStyle:{"font-weight":"900"}},[e._v("BLX-PROTOTYPE")])],1),n("v-spacer"),n("v-btn",{staticClass:"primary--text",attrs:{color:"secondary"},on:{click:e.openTerminal}},[n("v-icon",[e._v("mdi-console")])],1)],1),n("v-main",[n("v-snackbar",{attrs:{value:e.$store.state.snackbar.open,top:"",color:e.$store.state.snackbar.logLevel},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){return e.$store.commit("setSnackbar",{open:!1})}}},"v-btn",r,!1),[e._v("Close")])]}}])},[e._v(" "+e._s(e.$store.state.snackbar.notification)+" ")]),n("v-fade-transition",[e.checkBluetoothAvailability||e.bluetoothAvailable?n("router-view",{staticClass:"fill-height",attrs:{isBluetoothAvailable:e.bluetoothAvailable}}):n("v-alert",{staticClass:"ma-4",attrs:{border:"right",elevation:"1",type:"error"}},[e._v("Bluetooth is not supported by your browser. Apple iOS does not support Web-Bluetooth yet. This App works best with Google Chrome.")])],1)],1),n("Terminal",{attrs:{open:e.terminalOpen,closeTerminal:function(){e.terminalOpen=!1}}}),n("v-footer",{attrs:{app:"",color:"secondary"}},[n("v-spacer"),n("div",[e._v("© "+e._s((new Date).getFullYear()))])],1)],1)},o=[],i=(n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],attrs:{justify:"center"}},[n("v-dialog",{attrs:{value:e.open,fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeTerminal}},[n("v-icon",[e._v("mdi-close")])],1),n("v-toolbar-title",[e._v("Debugging Terminal")]),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:e.closeTerminal}},[e._v("Close")])],1)],1),n("div",{attrs:{id:"term"}})],1)],1)],1)}),c=[],s=n("d771"),l=(n("72bc"),{name:"Terminal",mounted:function(){},data:function(){return{notifications:!1,sound:!0,widgets:!1}},watch:{open:function(e,t){e!==t&&!0===e&&this.$nextTick((function(){s["blx"].setTerminal("term")}))}},props:["open","closeTerminal"]}),u=l,d=n("2877"),v=n("6544"),p=n.n(v),f=n("8336"),b=n("b0af"),m=n("169a"),h=n("132d"),g=n("0fd9"),x=n("2fa4"),w=n("71d9"),y=n("2a7f"),k=Object(d["a"])(u,i,c,!1,null,null,null),R=k.exports;p()(k,{VBtn:f["a"],VCard:b["a"],VDialog:m["a"],VIcon:h["a"],VRow:g["a"],VSpacer:x["a"],VToolbar:w["a"],VToolbarItems:y["a"],VToolbarTitle:y["b"]});var C={name:"App",components:{Terminal:R},data:function(){return{terminalOpen:!1,notInstalled:!0,checkBluetoothAvailability:!0,bluetoothAvailable:!1,snackbar:!0,text:"My timeout is set to 2000.",timeout:2e3}},created:function(){var e=this;"undefined"===typeof window.navigator.bluetooth&&(this.checkBluetoothAvailability=!1,this.bluetoothAvailable=!1),navigator.bluetooth.getAvailability().then((function(t){e.bluetoothAvailable=t})).finally((function(){e.checkBluetoothAvailability=!1})),"onavailabilitychanged"in navigator.bluetooth&&navigator.bluetooth.addEventListener("availabilitychanged",(function(e){this.bluetoothAvailable=e.value,console.log("> Bluetooth is ".concat(e.value?"available":"unavailable"))}))},methods:{doubleClick:function(e){e.preventDefault(),e.target.dataset.double?this.openTerminal():(e.target.dataset.double=!0,setTimeout((function(){delete e.target.dataset.double}),1e3))},openTerminal:function(){this.terminalOpen=!0},installApp:function(){this.notInstalled=!1}}},D=C,O=(n("034f"),n("0798")),T=n("7496"),S=n("40dc"),E=n("0789"),_=n("553a"),B=n("f6c4"),A=n("2db4"),L=Object(d["a"])(D,a,o,!1,null,null,null),I=L.exports;p()(L,{VAlert:O["a"],VApp:T["a"],VAppBar:S["a"],VBtn:f["a"],VFadeTransition:E["c"],VFooter:_["a"],VIcon:h["a"],VMain:B["a"],VSnackbar:A["a"],VSpacer:x["a"]});var V=n("9483");Object(V["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),window.location.reload(!0)},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var j=n("f309"),P=n("da5b"),F=n.n(P);r["a"].use(j["a"]);var N=new j["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#001e67",secondary:"#eceff1",accent:"#FFA823",error:"#a6001f",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},lang:{locales:{en:F.a},current:"en"}}),$=(n("d5e8"),n("5363"),n("8c4f")),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{staticClass:"text-center"},[n("v-col",[n("v-card",{staticClass:"mx-auto",attrs:{flat:"",tile:""}},[n("v-list",{staticClass:"mb-2 py-0",attrs:{outlined:""}},[n("v-progress-linear",{attrs:{indeterminate:"",active:e.connecting,color:"primary darken-2"}}),n("v-list-item",{staticClass:"accent--text font-weight-black",attrs:{"two-line":"",ripple:!e.isBluetoothAvailable,disabled:!e.isBluetoothAvailable,color:"accent"},on:{click:e.openConnectionPopup}},[n("v-list-item-avatar",[n("v-icon",{staticClass:"accent white--text"},[e._v("mdi-plus")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"accent--text font-weight-black text-left"},[e._v("Live Connection")]),n("v-list-item-subtitle",{staticClass:"accent--text font-weight-regular text-left"},[e._v("Search for a new Bluetooth device and open a live connection")])],1)],1),n("v-divider",{directives:[{name:"show",rawName:"v-show",value:e.devices.length>0,expression:"devices.length > 0"}]}),n("v-subheader",{directives:[{name:"show",rawName:"v-show",value:e.devices.length>0,expression:"devices.length > 0"}]},[e._v("DATA STORE")]),n("v-list-item-group",{directives:[{name:"show",rawName:"v-show",value:e.devices.length>0,expression:"devices.length > 0"}],attrs:{color:"primary"},model:{value:e.selectedDevice,callback:function(t){e.selectedDevice=t},expression:"selectedDevice"}},e._l(e.devices,(function(t,r){return n("v-list-item",{key:r,on:{dblclick:function(t){return e.openDevice(t,r)}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-bluetooth")])],1),t?n("v-list-item-content",[n("v-list-item-title",{staticClass:"text-left",domProps:{textContent:e._s(t.name)}})],1):e._e()],1)})),1)],1)],1),n("v-fade-transition",["number"===typeof e.selectedDevice?n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"8",sm:"10"}},[n("v-btn",{attrs:{color:"accent",depressed:"",block:""},on:{click:e.readDeviceData}},[e._v("Read data")])],1),n("v-col",{attrs:{cols:"4",sm:"2"}},[n("v-btn",{attrs:{block:"",depressed:"",color:"error"},on:{click:e.deleteDevice}},[n("v-icon",[e._v("mdi-delete")])],1)],1)],1):e._e()],1)],1)],1),e.connectionPopup?n("connection-popup",{attrs:{device:e.device,open:e.connectionPopup,close:e.closeConnectionPopup}}):e._e()],1)},M=[],G=(n("b0c0"),n("96cf"),n("1da1")),q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{value:e.open,persistent:""}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Connected to Device: "+e._s(e.device&&e.device.name))]),n("v-card-text",[n("v-row",{staticClass:"pb-4",attrs:{dense:""}},[n("v-col",{staticClass:"py-1",attrs:{xs:"12",sm:"4",cols:"12"}},[n("v-text-field",{attrs:{"background-color":"blue-grey lighten-5",dense:"","hide-details":"",readonly:"",label:"Temp.",placeholder:"32.5 °C",filled:""}})],1),n("v-col",{staticClass:"py-1",attrs:{xs:"12",sm:"4",cols:"12"}},[n("v-text-field",{attrs:{"background-color":"blue-grey lighten-5",dense:"","hide-details":"",readonly:"",label:"Pressure",placeholder:"x hPa",filled:""}})],1),n("v-col",{staticClass:"py-1",attrs:{xs:"12",sm:"4",cols:"12"}},[n("v-text-field",{attrs:{"background-color":"blue-grey lighten-5",dense:"","hide-details":"",readonly:"",label:"Battery",placeholder:"2.2 V",color:"primary","append-outer-icon":"mdi-refresh",filled:""},on:{"click:append":function(t){return e.alert("test")}}})],1),n("v-btn",{staticClass:"my-5",attrs:{big:"",depressed:"",block:"",color:"accent",disabled:e.loadingData,loading:e.loadingData},on:{click:e.fetchData}},[e._v("Fetch Data from Logger")])],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.closePopup}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-delete")]),n("span",{staticClass:"d-none d-sm-block"},[e._v("Delete Data on Logger")])],1),n("v-btn",{attrs:{color:"grey",text:""},on:{click:e.closePopup}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-settings")]),n("span",{staticClass:"d-none d-sm-block"},[e._v("Change Parameters")])],1),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.closePopup}},[e._v("Close")])],1)],1)],1)],1)},H=[],X={data:function(){return{loadingData:!1}},mounted:function(){},methods:{closePopup:function(){s["blx"].userSendCmd(".d"),this.close()},fetchData:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loadingData=!0,t.next=4,s["blx"].userSendCmd(".g data.edt");case 4:return t.next=6,s["blx"].getInfileBytebuf();case 6:n=t.sent,r=new TextDecoder("utf-8").decode(n),a={name:e.device.name,id:e.device.id,log:[],lastFetch:(new Date).toISOString(),data:r},e.$store.commit("upsertDevice",a),e.closePopup(),e.$router.push("/device/"+a.id),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](0);case 16:return t.prev=16,e.loadingData=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,14,16,19]])})))()}},props:["close","open","device"]},J=X,W=n("99d9"),z=n("62ad"),K=n("8654"),Y=Object(d["a"])(J,q,H,!1,null,null,null),Q=Y.exports;p()(Y,{VBtn:f["a"],VCard:b["a"],VCardActions:W["a"],VCardText:W["b"],VCardTitle:W["c"],VCol:z["a"],VDialog:m["a"],VIcon:h["a"],VRow:g["a"],VSpacer:x["a"],VTextField:K["a"]});var Z="5c170001-b5a3-f393-e0a9-a37f42997c22",ee={name:"Landing",data:function(){return{selectedDevice:null,connectionPopup:!1,connecting:!1,device:null}},computed:{devices:function(){return this.$store.state.devices}},components:{ConnectionPopup:Q},methods:{openConnectionPopup:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.connecting=!0,t.next=4,s["blx"].userSendCmd(".c");case 4:e.device=s["blx"].getDevice(),e.connectionPopup=!0,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),"ERROR(Cmd): Already connected!"===t.t0?(e.device=s["blx"].getDevice(),e.connectionPopup=!0):"ERROR(Discover): NotFoundError: User cancelled the requestDevice() chooser."===t.t0||(e.$store.dispatch("notify",{notification:t.t0,logLevel:"error"}),console.error(t.t0));case 11:return t.prev=11,e.connecting=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()},closeConnectionPopup:function(){this.connectionPopup=!1},deleteDevice:function(){this.$store.commit("removeDevice",this.selectedDevice)},openDevice:function(e,t){this.$router.push("device/"+this.devices[t].id)},readDeviceData:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("device/"+e.devices[e.selectedDevice].id);case 1:case"end":return t.stop()}}),t)})))()},addBleDevice:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isBluetoothAvailable){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,navigator.bluetooth.requestDevice({filters:[{services:[Z]}]});case 5:n=t.sent,r={name:n.name,id:n.id,log:[],lastSeen:(new Date).toISOString(),lastFetch:null,data:[]},e.$store.commit("setCurrentServer",n),e.$store.commit("upsertDevice",r),e.$router.push("device/"+n.id),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](2),e.$store.dispatch("notify",{notification:t.t0,logLevel:"error"}),console.warn(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))()}},props:["isBluetoothAvailable"]},te=ee,ne=(n("cbf6"),n("a523")),re=n("ce7e"),ae=n("8860"),oe=n("da13"),ie=n("8270"),ce=n("5d23"),se=n("1baa"),le=n("34c3"),ue=n("8e36"),de=n("e0c7"),ve=Object(d["a"])(te,U,M,!1,null,null,null),pe=ve.exports;p()(ve,{VBtn:f["a"],VCard:b["a"],VCol:z["a"],VContainer:ne["a"],VDivider:re["a"],VFadeTransition:E["c"],VIcon:h["a"],VList:ae["a"],VListItem:oe["a"],VListItemAvatar:ie["a"],VListItemContent:ce["a"],VListItemGroup:se["a"],VListItemIcon:le["a"],VListItemSubtitle:ce["b"],VListItemTitle:ce["c"],VProgressLinear:ue["a"],VRow:g["a"],VSubheader:de["a"]});var fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",{staticClass:"blue-grey lighten-5",staticStyle:{position:"fixed"},attrs:{elevation:"1",dense:"",width:"100%"}},[n("v-btn",{attrs:{icon:""},on:{click:e.goBack}},[n("v-icon",[e._v("mdi-arrow-left")])],1),n("v-toolbar-title",[e.device?n("span",{staticClass:"hidden-xs-only"},[e._v("Device")]):e._e(),e._v(" "+e._s(e.device&&e.device.name)+" "),e.device?n("span",{staticClass:"grey--text d-none d-md-inline"},[e._v("["+e._s(e.device&&e.device.id)+"]")]):e._e()]),n("v-spacer"),n("v-btn",{attrs:{icon:""}},[n("v-icon",[e._v("mdi-settings")])],1),n("v-btn",{attrs:{icon:"",color:"error"},on:{click:e.removeDevice}},[n("v-icon",[e._v("mdi-delete")])],1)],1),n("v-container",{staticClass:"device"},[n("h5",{staticClass:"primary--text text-left",staticStyle:{"margin-top":"50px"}},[e._v("Last Log")]),n("pre",{staticClass:"primary--text"},[e._v("      "+e._s(e.device&&e.device.data)+"\n    ")]),n("v-card",[n("v-card-title",[n("v-btn",{attrs:{disabled:""}},[e._v("Download Log")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-data-table",{attrs:{headers:e.headers,items:e.measurements,search:e.search}})],1)],1)],1)},be=[],me=(n("7db0"),{data:function(){return{search:"",headers:[{text:"Date / Time",align:"start",value:"dateTime"},{text:"Temperature (°C)",value:"temp"},{text:"Pressure (hPa)",value:"pressure"},{text:"Battery (V)",value:"battery"}],measurements:[{dateTime:new Date,temp:32.5,pressure:12.2,battery:2.2},{dateTime:new Date,temp:30,pressure:11.2,battery:2.2},{dateTime:new Date,temp:30.5,pressure:10.5,battery:2.2},{dateTime:new Date,temp:28.3,pressure:12.2,battery:2.2},{dateTime:new Date,temp:17.5,pressure:12.2,battery:2.2},{dateTime:new Date,temp:32.5,pressure:12.2,battery:2.2}]}},methods:{goBack:function(){this.$router.go(-1)},removeDevice:function(){window.confirm("Do you really want to remove this device?")&&(this.$store.commit("removeDevice",this.device.id),this.goBack())}},computed:{device:function(){var e=this;return this.$store.state.devices.find((function(t){return t.id===e.$route.params.id}))}}}),he=me,ge=n("8fea"),xe=Object(d["a"])(he,fe,be,!1,null,null,null),we=xe.exports;p()(xe,{VBtn:f["a"],VCard:b["a"],VCardTitle:W["c"],VContainer:ne["a"],VDataTable:ge["a"],VIcon:h["a"],VSpacer:x["a"],VTextField:K["a"],VToolbar:w["a"],VToolbarTitle:y["b"]}),r["a"].use($["a"]);var ye=[{path:"/",name:"Landing",component:pe},{path:"/device/:id",name:"Device",component:we}],ke=new $["a"]({routes:ye}),Re=ke,Ce=(n("99af"),n("c740"),n("a434"),n("2909")),De=n("2f62");r["a"].use(De["a"]);var Oe="BLX_2020_",Te=new De["a"].Store({state:{isBluetoothAvailable:!1,currentServer:null,devices:[],snackbar:{notification:null,open:!1,logLevel:"info"}},mutations:{initialiseStore:function(e){var t=localStorage.getItem(Oe+"devices");if("string"===typeof t)try{var n=JSON.parse(t);Array.isArray(n)&&(e.devices=n)}catch(r){}},upsertDevice:function(e,t){if(t){var n=e.devices.findIndex((function(e){return e.name===t.name&&e.id===t.id}));if(-1!==n){var r=Object(Ce["a"])(e.devices);r[n]=t,e.devices=r}else e.devices=[].concat(Object(Ce["a"])(e.devices),[t]);localStorage.setItem(Oe+"devices",JSON.stringify(e.devices))}},removeDevice:function(e,t){e.devices.splice(t,1),e.devices=Object(Ce["a"])(e.devices),localStorage.setItem(Oe+"devices",JSON.stringify(e.devices))},setCurrentServer:function(e,t){t&&(e.currentServer=t)},setSnackbar:function(e,t){e.snackbar=t}},actions:{notify:function(e,t){var n=e.commit,r=t.notification,a=t.logLevel,o=void 0===a?"info":a,i=t.timeout,c=void 0===i?1e4:i;n("setSnackbar",{notification:r,logLevel:o,open:!0}),setTimeout((function(){return n("setSnackbar",{open:!1})}),c)}},modules:{}});r["a"].config.productionTip=!1,new r["a"]({vuetify:N,router:Re,store:Te,beforeCreate:function(){this.$store.commit("initialiseStore")},render:function(e){return e(I)}}).$mount("#app")},"72bc":function(e,t,n){(function(t){n("b0c0"),n("ac1f"),n("5319");var r=n("7037"),a="object"===("undefined"===typeof window?"undefined":r(window))&&window.window===window?window:"object"===("undefined"===typeof self?"undefined":r(self))&&self.self===self?self:"object"===("undefined"===typeof t?"undefined":r(t))&&t.global===t?t:this;function o(e,t){return"undefined"===typeof t?t={autoBom:!1}:"object"!==r(t)&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function i(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function c(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l=a.saveAs||("object"!==("undefined"===typeof window?"undefined":r(window))||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=a.URL||a.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener","string"===typeof e?(o.href=e,o.origin!==location.origin?c(o.href)?i(e,t,n):s(o,o.target="_blank"):s(o)):(o.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(o.href)}),4e4),setTimeout((function(){s(o)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"===typeof e)if(c(e))i(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){s(r)}))}else navigator.msSaveOrOpenBlob(o(e,n),t)}:function(e,t,n,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),"string"===typeof e)return i(e,t,n);var c="application/octet-stream"===e.type,s=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||c&&s)&&"object"===("undefined"===typeof FileReader?"undefined":r(FileReader))){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},u.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,v=d.createObjectURL(e);o?o.location=v:location.href=v,o=null,setTimeout((function(){d.revokeObjectURL(v)}),4e4)}});a.saveAs=l.saveAs=l,e.exports=l}).call(this,n("c8ba"))},"7ee4":function(e,t,n){},"8a23":function(e,t,n){},cbf6:function(e,t,n){"use strict";var r=n("7ee4"),a=n.n(r);a.a},d771:function(e,t,n){var r,a;n("c975"),n("a15b"),n("baa5"),n("b0c0"),n("b680"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("2ca0"),n("498a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("96cf");var o=n("c973"),i=function(){"use strict";var e="V0.1 / 21.06.2020";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout(t,e)}))}function n(){if(void 0!=navigator.bluetooth){if("https:"!=location.protocol&&"file:"!=location.protocol&&"content:"!=location.protocol&&"localhost"!=location.hostname){var e="https://"+location.hostname+location.pathname;alert("HTTPS required. Jump to '"+e+"'"),window.location.assign(e)}}else alert("Browser does not support Bluetooth!")}var r,a,i,c,s,l,u,d,v,p,f,b="5c170001-b5a3-f393-e0a9-a37f42997c22",m="5c170002-b5a3-f393-e0a9-a37f42997c22",h="5c170003-b5a3-f393-e0a9-a37f42997c22",g=!1,x=!1,w=0,y=16,k=32,R=33,C=34,D=35,O=5e3,T="infile.dat",S=20,E=!1,_="3";function B(){Z("Disconnected"),a=void 0,i=void 0,g=!1}function A(){Z("Connected"),g=!0}function L(e){var t=new Uint8Array(e.target.value.buffer),n=t.length;if(n<2)return Z("ERROR(Data): NUS RX blocklen: "+n),void console.log(t);var r=t[0];if(r+2!=n)return Z("ERROR(Data): NUS RX blocklen/dlen(0): "+n+"/"+r),void console.log(t);var a,o,i,b,m=t[1],h=t.subarray(2);switch(m){case D:if(a=new TextDecoder("utf-8").decode(h),"~"==a.charAt(0)&&a.length>1)switch(a.charAt(1)){case"G":o=parseInt(a.substr(3)),i=parseInt(a.substr(a.indexOf(" "))),Z(i?"Get "+o+" Bytes from Position "+i:"Get "+o+" Bytes"),c=o,s=0,l=new Uint8Array(o),u=Date.now(),d=u-1e3;break;case"D":o=parseInt(a.substr(a.indexOf("DS:")+3)),i=parseInt(a.substr(a.indexOf("DA:")+3)),b=new Date(1e3*parseInt(a.substr(a.indexOf("DF:")+3))),Z("Disksize: "+(o/1024).toFixed(0)+" kB / Available: "+(i/1024).toFixed(0)+" kB Formated: ["+b.toLocaleDateString()+" "+b.toLocaleTimeString()+"]");break;case'"':o=a.lastIndexOf('"');var g=a.substring(2,o),y=a.substr(o);o=parseInt(y.substr(y.indexOf("L:")+2)),i=parseInt(y.substr(y.indexOf("CR:")+3),16),b=new Date(1e3*parseInt(y.substr(y.indexOf("T:")+2)));var O=y.indexOf("UC "),T=y.indexOf("ES "),_="";O>0&&(_=" (Unclosed)"),isNaN(i)||(_+=" CRC: "+i.toString(16).toUpperCase()),T>0&&(_=" ExtSync"),Z(' - "'+g+'" Len: '+o+" Bytes"+_+" ["+b.toLocaleDateString()+" "+b.toLocaleTimeString()+"]");break;case"X":Z("WARNING: Connection Autoclose soon");break;default:Z("ERROR((more)): '"+a+"' ???")}else Z("(more): '"+a+"'");break;case R:if(a=new TextDecoder("utf-8").decode(h),"~"==a.charAt(0)&&a.length>1)switch(a.charAt(1)){case"B":"(UNKNOWN)",b=a.indexOf(" "),b>0?(i=a.substr(b+1),16==i.length?(Z("Device MAC:"+i),i):w="ERROR: Invalid MAC"):w="ERROR: No MAC",o=parseInt(a.substr(3)),o>=S&&o<250?(p=o,Z("BLE Blocksize: "+p+" Bytes")):w="ERROR: BLE Blocksize: "+o;break;case"C":o=parseInt(a.substr(3)),b=a.indexOf(" "),b>0?(i=parseInt(a.substr(b+1)),i>0?w="ERROR: Connection Speed: ("+o+"): "+i:Z("Connection Speed: "+(o>50?"Standard (":"Fast (")+o+")")):w="ERROR: Connection Speed";break;case"T":o=parseInt(a.substr(3));var B,A=new Date(1e3*o),L=(Date.now()/1e3-o).toFixed(0);L>864e3||L<-864e3?B=" (Warning: DeviceTime Lost!)":((L<=1||L>=-1)&&(L=0),B=" (Delta to App: "+L+" sec)"),Z("Time: ["+A.toLocaleDateString()+" "+A.toLocaleTimeString()+"] "+B);break;case"N":o=parseInt(a.substr(3)),Z("Filesize: "+o+" Bytes"),v=o;break;case"L":o=parseInt(a.substr(3)),Z(o+" Bytes transferred");break;case"P":Z("File Ready");break;default:Z("ERROR(End): '"+a+"' ???")}else Z("End: '"+a+"'");x=!1;break;case k:switch(a=new TextDecoder("utf-8").decode(h),a.charAt(0)){case"R":o=parseInt(a.substr(2)),f=o<-199&&o>=0?"[NoSignal]":o,E&&Z("Signal (dBm):"+f);break;default:Z("Info: '"+a+"'")}break;case C:if(o=c-s,h.length>o){w="ERROR: Too many data";break}l.set(h,s),s+=r;var I=Date.now();if(I-d>1e3&&(o=(s/c*100).toFixed(0),Z("Get: "+o+"% / "+s+" Bytes"),d=I),o=c-s,0==o){var V=Date.now()-u;Z("Get OK ("+V/1e3+" sec, "+(s/V*1e3).toFixed(0)+" Bytes/sec)","t_app")}break;default:Z("ERROR(Data): '"+a+"'")}}function I(){return V.apply(this,arguments)}function V(){return V=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Z("Connect to '"+r.name+"'..."),e.prev=1,e.next=4,r.gatt.connect();case 4:return t=e.sent,e.next=7,t.getPrimaryService(b);case 7:return n=e.sent,e.next=10,n.getCharacteristic(m);case 10:return a=e.sent,e.next=13,n.getCharacteristic(h);case 13:return i=e.sent,e.next=16,i.startNotifications();case 16:i.addEventListener("characteristicvaluechanged",L),A(),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](1),w="ERROR(Connect): '"+e.t0.message+"'";case 23:case"end":return e.stop()}}),e,null,[[1,20]])}))),V.apply(this,arguments)}function j(){return P.apply(this,arguments)}function P(){return P=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Z("Connect: Discover Devices"),e.prev=1,e.next=4,navigator.bluetooth.requestDevice({filters:[{services:[b]}]});case 4:return t=e.sent,r=t,r.addEventListener("gattserverdisconnected",B),e.next=9,I();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),w="ERROR(Discover): "+e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),P.apply(this,arguments)}function F(e){return N.apply(this,arguments)}function N(){return N=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:y,r=t.length,o=new Uint8Array(r+2),i=o.subarray(2),o[0]=r,o[1]=n,(new TextEncoder).encodeInto(t,i);try{a.writeValue(o.buffer)}catch(s){0==g&&(s="Connection lost"),w="ERROR(DeviceSend): "+s}case 8:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function $(e){return U.apply(this,arguments)}function U(){return U=o(regeneratorRuntime.mark((function e(n){var r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:O,x=!0,e.next=4,F(n);case 4:if(w){e.next=15;break}case 5:if(1==x){e.next=7;break}return e.abrupt("break",15);case 7:return e.next=9,t(10);case 9:if(r-=10,!(r<0)){e.next=13;break}return w="ERROR(DeviceCmd): Timeout",e.abrupt("break",15);case 13:e.next=5;break;case 15:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function M(e){return G.apply(this,arguments)}function G(){return G=o(regeneratorRuntime.mark((function e(n){var a,o,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=n.split(" "),e.t0=a[0].toLowerCase(),e.next="q"===e.t0||"quit"===e.t0?4:"rs"===e.t0||"rssi"===e.t0?6:"cf"===e.t0||"connectionfast"===e.t0?9:"l"===e.t0||"lines"===e.t0?12:"s"===e.t0||"sleep"===e.t0?16:"c"===e.t0||"connect"===e.t0?22:"d"===e.t0||"disconnect"===e.t0?29:"r"===e.t0||"reconnect"===e.t0?31:"i"===e.t0||"identify"===e.t0?42:"g"===e.t0||"get"===e.t0?45:69;break;case 4:return ae(),e.abrupt("break",70);case 6:return a.length>1&&(o=parseInt(a[1]),E=Boolean(o)),Z("RSSI: "+(E?"On":"Off")),e.abrupt("break",70);case 9:return a.length>1&&("f"==a[1].charAt(0).toLowerCase()?_="F":(o=parseInt(a[1]),o<3?o=3:o>30&&(o=30),_=o)),Z("Fast Connection Speed: '"+_+"'"),e.abrupt("break",70);case 12:return a.length>1&&(o=parseInt(a[1])),z=o,Z("Lines: "+o),e.abrupt("break",70);case 16:return a.length>1&&(o=parseInt(a[1])),Z("Sleep: "+o+" msec..."),e.next=20,t(o);case 20:return Z("...OK"),e.abrupt("break",70);case 22:if(0!=g){e.next=27;break}return e.next=25,j();case 25:e.next=28;break;case 27:w="ERROR(Cmd): Already connected!";case 28:return e.abrupt("break",70);case 29:return 1==g?r.gatt.disconnect():w="ERROR(Cmd): Not connected!",e.abrupt("break",70);case 31:if(1!=g){e.next=35;break}w="ERROR(Cmd): Already connected!",e.next=41;break;case 35:if(void 0!=r){e.next=39;break}w="ERROR(Cmd): Nothing to Reconnect!",e.next=41;break;case 39:return e.next=41,I();case 41:return e.abrupt("break",70);case 42:return e.next=44,q();case 44:return e.abrupt("break",70);case 45:if(i=a[1],!(void 0==i||i.length<1||i.length>21)){e.next=49;break}return w="ERROR(Cmd): Filename",e.abrupt("break",70);case 49:return v=-1,T=i,e.next=53,$("N:"+i);case 53:if(!w){e.next=55;break}return e.abrupt("break",70);case 55:if(!(v<0)){e.next=58;break}return w="ERROR(SysCmd): No File",e.abrupt("break",70);case 58:if(Z('Get File "'+i+'": Total Len: '+v+" Bytes"),c=v,s=0,a[2]&&(s=parseInt(a[2]),c=a[3]?parseInt(a[3]):v-s),!(s<0||c<1||s+c>v)){e.next=65;break}return w="ERROR(SysCmd): Out of range of File",e.abrupt("break",70);case 65:return e.next=67,X(s,c);case 67:return w||W(),e.abrupt("break",70);case 69:w="ERROR(SysCmd): Command unknown";case 70:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function q(){return H.apply(this,arguments)}function H(){return H=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$("~",5e3);case 2:if(!w){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,$("T",5e3);case 6:if(!w){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,$("v",1e4);case 10:if(!w){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,$("CS",5e3);case 14:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function X(e,t){return J.apply(this,arguments)}function J(){return J=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(n>1e3)){e.next=5;break}return e.next=3,$("C"+_,32e3);case 3:if(!w){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,$("G "+n+" "+t,6e5);case 7:if(!(n>1e3)){e.next=12;break}return e.next=10,$("CS",1e4);case 10:if(!w){e.next=12;break}return e.abrupt("return");case 12:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function W(){if(void 0!=s&&s)if(void 0!=l&&l.length==c)try{var e=T.lastIndexOf("."),t="application/octet-binary";if(e>1)switch(T.substr(e).toLowerCase()){case".jpg":t="image/jpeg";break;case".csv":t="application/csv;charset=utf-8";break;case".pdf":t="application/pdf";break;case".txt":case".log":t="text/plain;charset=utf-8";break}var n=new Blob([l],{type:t});saveAs(n,T),Z("Export '"+T+"'")}catch(r){Z("ERROR: Export failed!","t_err")}else alert("ERROR: Inconsistent Data");else alert("ERROR: No Data to export")}var z,K,Y=15,Q=[];function Z(t){void 0!=t?Q.push(t):Q[0]="*** BLX Terminal "+e+" ***";while(Q.length>z)Q.shift();void 0!=K&&(document.getElementById("blxTerminalOut").innerText=Q.join("\n"))}function ee(e){13===e.keyCode||10===e.keycode?(e.preventDefault(),document.getElementById("blxTerminalSend").click()):27===e.keyCode&&(e.preventDefault(),document.getElementById("blxTerminalCmd").value="")}function te(e){void 0!=K&&(document.getElementById("blxTerminalSend").disabled=!e)}function ne(){return re.apply(this,arguments)}function re(){return re=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.getElementById("blxTerminalCmd"),n=t.value.trim(),t.value="",t.focus(),Z("> "+n),te(!1),w=0,!n.startsWith(".")){e.next=12;break}return e.next=10,M(n.substr(1));case 10:e.next=14;break;case 12:return e.next=14,$(n);case 14:w&&Z(w),te(!0);case 16:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y;void 0!=e?(z=t,K=document.getElementById(e),K.innerHTML="<div id='blxTerminalOut' style='border: 1px solid blue; margin: 3px'></div><div>Cmd: &gt <input id='blxTerminalCmd' typ='text' style='width: 80%;' maxlength='80'> <button id='blxTerminalSend'>Send</button></div>",document.getElementById("blxTerminalCmd").addEventListener("keyup",ee),document.getElementById("blxTerminalSend").addEventListener("click",ne),document.getElementById("blxTerminalCmd").focus(),Z(),te(!0)):(void 0!=K&&(K.innerHTML=""),K=void 0)}function oe(e){return ie.apply(this,arguments)}function ie(){return ie=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.trim(),Z("=> "+n),w=0,!n.startsWith(".")){e.next=8;break}return e.next=6,M(n.substr(1));case 6:e.next=10;break;case 8:return e.next=10,$(n);case 10:w&&Z(w);case 11:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}return n(),{setTerminal:function(e,t){return ae(e,t)},userSendCmd:function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe(t);case 2:if(!w){e.next=4;break}throw w;case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getInfileBytebuf:function(){return l},getDevice:function(){return r}}}();"undefined"!==typeof e.exports?e.exports.blx=i:(r=[],a=function(){return i}.apply(t,r),void 0===a||(e.exports=a))}});
//# sourceMappingURL=app.66d6bece.js.map
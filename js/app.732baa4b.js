(function(e){function t(t){for(var r,o,c=t[0],s=t[1],l=t[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("8a23"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:"",flat:""}},[n("div",{staticClass:"d-flex align-center flex-shrink-0",on:{dblclick:e.openTerminal,click:function(t){return e.doubleClick(t)}}},[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-bluetooth")]),n("h1",{staticClass:"text-h6",staticStyle:{"font-weight":"900"}},[e._v("BLX-PROTOTYPE")])],1),n("v-spacer"),n("v-btn",{staticClass:"primary--text",attrs:{color:"secondary"},on:{click:e.openTerminal}},[e._v("Open Terminal")])],1),n("v-main",[n("v-fade-transition",[e.checkBluetoothAvailability||e.bluetoothAvailable?e._e():n("v-alert",{staticClass:"ma-4",attrs:{border:"right",elevation:"1",type:"error"}},[e._v("Bluetooth is not supported in your browser.")])],1),n("router-view",{attrs:{isBluetoothAvailable:e.bluetoothAvailable}})],1),n("Terminal",{attrs:{open:e.terminalOpen,closeTerminal:function(){e.terminalOpen=!1}}}),n("v-footer",{attrs:{color:"secondary"}},[n("v-spacer"),n("div",[e._v("Â© "+e._s((new Date).getFullYear()))])],1)],1)},i=[],o=(n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{value:e.open,fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:e.closeTerminal}},[n("v-icon",[e._v("mdi-close")])],1),n("v-toolbar-title",[e._v("Debugging Terminal")]),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:e.closeTerminal}},[e._v("Close")])],1)],1),n("div",{attrs:{id:"term"}})],1)],1)],1)}),c=[],s=(n("c975"),n("a15b"),n("baa5"),n("b0c0"),n("b680"),n("ac1f"),n("25f0"),n("1276"),n("2ca0"),n("498a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("96cf"),n("1da1")),l=function(){var e="V0.1 / 21.06.2020";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout(t,e)}))}function n(){if(void 0!=navigator.bluetooth){if("https:"!=location.protocol&&"file:"!=location.protocol&&"content:"!=location.protocol&&"localhost"!=location.hostname){var e="https://"+location.hostname+location.pathname;alert("HTTPS required. Jump to '"+e+"'"),window.location.assign(e)}}else alert("Browser does not support Bluetooth!")}var r,a,i,o,c,l,u,d,p,v,f,b="5c170001-b5a3-f393-e0a9-a37f42997c22",m="5c170002-b5a3-f393-e0a9-a37f42997c22",h="5c170003-b5a3-f393-e0a9-a37f42997c22",g=!1,x=!1,y=0,w=16,k=32,R=33,C=34,O=35,T=5e3,D="infile.dat",E=20,S=!1,B="3";function I(){Z("Disconnected"),a=void 0,i=void 0,g=!1}function _(){Z("Connected"),g=!0}function A(e){var t=new Uint8Array(e.target.value.buffer),n=t.length;if(n<2)return Z("ERROR(Data): NUS RX blocklen: "+n),void console.log(t);var r=t[0];if(r+2!=n)return Z("ERROR(Data): NUS RX blocklen/dlen(0): "+n+"/"+r),void console.log(t);var a,i,s,b,m=t[1],h=t.subarray(2);switch(m){case O:if(a=new TextDecoder("utf-8").decode(h),"~"==a.charAt(0)&&a.length>1)switch(a.charAt(1)){case"G":i=parseInt(a.substr(3)),s=parseInt(a.substr(a.indexOf(" "))),Z(s?"Get "+i+" Bytes from Position "+s:"Get "+i+" Bytes"),o=i,c=0,l=new Uint8Array(i),u=Date.now(),d=u-1e3;break;case"D":i=parseInt(a.substr(a.indexOf("DS:")+3)),s=parseInt(a.substr(a.indexOf("DA:")+3)),b=new Date(1e3*parseInt(a.substr(a.indexOf("DF:")+3))),Z("Disksize: "+(i/1024).toFixed(0)+" kB / Available: "+(s/1024).toFixed(0)+" kB Formated: ["+b.toLocaleDateString()+" "+b.toLocaleTimeString()+"]");break;case'"':i=a.lastIndexOf('"');var g=a.substring(2,i),w=a.substr(i);i=parseInt(w.substr(w.indexOf("L:")+2)),s=parseInt(w.substr(w.indexOf("CR:")+3),16),b=new Date(1e3*parseInt(w.substr(w.indexOf("T:")+2)));var T=w.indexOf("UC "),D=w.indexOf("ES "),B="";T>0&&(B=" (Unclosed)"),isNaN(s)||(B+=" CRC: "+s.toString(16).toUpperCase()),D>0&&(B=" ExtSync"),Z(' - "'+g+'" Len: '+i+" Bytes"+B+" ["+b.toLocaleDateString()+" "+b.toLocaleTimeString()+"]");break;case"X":Z("WARNING: Connection Autoclose soon");break;default:Z("ERROR((more)): '"+a+"' ???")}else Z("(more): '"+a+"'");break;case R:if(a=new TextDecoder("utf-8").decode(h),"~"==a.charAt(0)&&a.length>1)switch(a.charAt(1)){case"B":"(UNKNOWN)",b=a.indexOf(" "),b>0?(s=a.substr(b+1),16==s.length?(Z("Device MAC:"+s),s):y="ERROR: Invalid MAC"):y="ERROR: No MAC",i=parseInt(a.substr(3)),i>=E&&i<250?(v=i,Z("BLE Blocksize: "+v+" Bytes")):y="ERROR: BLE Blocksize: "+i;break;case"C":i=parseInt(a.substr(3)),b=a.indexOf(" "),b>0?(s=parseInt(a.substr(b+1)),s>0?y="ERROR: Connection Speed: ("+i+"): "+s:Z("Connection Speed: "+(i>50?"Standard (":"Fast (")+i+")")):y="ERROR: Connection Speed";break;case"T":i=parseInt(a.substr(3));var I,_=new Date(1e3*i),A=(Date.now()/1e3-i).toFixed(0);A>864e3||A<-864e3?I=" (Warning: DeviceTime Lost!)":((A<=1||A>=-1)&&(A=0),I=" (Delta to App: "+A+" sec)"),Z("Time: ["+_.toLocaleDateString()+" "+_.toLocaleTimeString()+"] "+I);break;case"N":i=parseInt(a.substr(3)),Z("Filesize: "+i+" Bytes"),p=i;break;case"L":i=parseInt(a.substr(3)),Z(i+" Bytes transferred");break;case"P":Z("File Ready");break;default:Z("ERROR(End): '"+a+"' ???")}else Z("End: '"+a+"'");x=!1;break;case k:switch(a=new TextDecoder("utf-8").decode(h),a.charAt(0)){case"R":i=parseInt(a.substr(2)),f=i<-199&&i>=0?"[NoSignal]":i,S&&Z("Signal (dBm):"+f);break;default:Z("Info: '"+a+"'")}break;case C:if(i=o-c,h.length>i){y="ERROR: Too many data";break}l.set(h,c),c+=r;var L=Date.now();if(L-d>1e3&&(i=(c/o*100).toFixed(0),Z("Get: "+i+"% / "+c+" Bytes"),d=L),i=o-c,0==i){var V=Date.now()-u;Z("Get OK ("+V/1e3+" sec, "+(c/V*1e3).toFixed(0)+" Bytes/sec)","t_app")}break;default:Z("ERROR(Data): '"+a+"'")}}function L(){return V.apply(this,arguments)}function V(){return V=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Z("Connect to '"+r.name+"'..."),e.prev=1,e.next=4,r.gatt.connect();case 4:return t=e.sent,e.next=7,t.getPrimaryService(b);case 7:return n=e.sent,e.next=10,n.getCharacteristic(m);case 10:return a=e.sent,e.next=13,n.getCharacteristic(h);case 13:return i=e.sent,e.next=16,i.startNotifications();case 16:i.addEventListener("characteristicvaluechanged",A),_(),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](1),y="ERROR(Connect): '"+e.t0.message+"'";case 23:case"end":return e.stop()}}),e,null,[[1,20]])}))),V.apply(this,arguments)}function j(){return F.apply(this,arguments)}function F(){return F=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Z("Connect: Discover Devices"),e.prev=1,e.next=4,navigator.bluetooth.requestDevice({filters:[{services:[b]}]});case 4:return t=e.sent,r=t,r.addEventListener("gattserverdisconnected",I),e.next=9,L();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),y="ERROR(Discover): "+e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),F.apply(this,arguments)}function P(e){return N.apply(this,arguments)}function N(){return N=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:w,r=t.length,i=new Uint8Array(r+2),o=i.subarray(2),i[0]=r,i[1]=n,(new TextEncoder).encodeInto(t,o);try{a.writeValue(i.buffer)}catch(s){0==g&&(s="Connection lost"),y="ERROR(DeviceSend): "+s}case 8:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function M(e){return $.apply(this,arguments)}function $(){return $=Object(s["a"])(regeneratorRuntime.mark((function e(n){var r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:T,x=!0,e.next=4,P(n);case 4:if(y){e.next=15;break}case 5:if(1==x){e.next=7;break}return e.abrupt("break",15);case 7:return e.next=9,t(10);case 9:if(r-=10,!(r<0)){e.next=13;break}return y="ERROR(DeviceCmd): Timeout",e.abrupt("break",15);case 13:e.next=5;break;case 15:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function U(e){return G.apply(this,arguments)}function G(){return G=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.split(" "),e.t0=n[0].toLowerCase(),e.next="q"===e.t0||"quit"===e.t0?4:"r"===e.t0||"rssi"===e.t0?6:"cf"===e.t0||"connectionfast"===e.t0?9:"l"===e.t0||"lines"===e.t0?12:"c"===e.t0||"connect"===e.t0?16:"d"===e.t0||"disconnect"===e.t0?23:"r"===e.t0||"reconnect"===e.t0?25:"c"===e.t0||"connect"===e.t0?36:"d"===e.t0||"disconnect"===e.t0?38:"r"===e.t0||"reconnect"===e.t0?40:"i"===e.t0||"identify"===e.t0?42:"g"===e.t0||"get"===e.t0?45:69;break;case 4:return ae(),e.abrupt("break",70);case 6:return n.length>1&&(a=parseInt(n[1]),S=Boolean(a)),Z("RSSI: "+(S?"On":"Off")),e.abrupt("break",70);case 9:return n.length>1&&("f"==n[1].charAt(0).toLowerCase()?B="F":(a=parseInt(n[1]),a<3?a=3:a>30&&(a=30),B=a)),Z("Fast Connection Speed: '"+B+"'"),e.abrupt("break",70);case 12:return n.length>1&&(a=parseInt(n[1])),z=a,Z("Lines: "+a),e.abrupt("break",70);case 16:if(0!=g){e.next=21;break}return e.next=19,j();case 19:e.next=22;break;case 21:y="ERROR(Cmd): Already connected!";case 22:return e.abrupt("break",70);case 23:return 1==g?r.gatt.disconnect():y="ERROR(Cmd): Not connected!",e.abrupt("break",70);case 25:if(1!=g){e.next=29;break}y="ERROR(Cmd): Already connected!",e.next=35;break;case 29:if(void 0!=r){e.next=33;break}y="ERROR(Cmd): Nothing to Reconnect!",e.next=35;break;case 33:return e.next=35,L();case 35:return e.abrupt("break",70);case 36:return 0==g?j():y="ERROR(Cmd): Already connected!",e.abrupt("break",70);case 38:return 1==g?r.gatt.disconnect():y="ERROR(Cmd): Not connected!",e.abrupt("break",70);case 40:return 1==g?y="ERROR(Cmd): Already connected!":void 0==r?y="ERROR(Cmd): Nothing to Reconnect!":L(),e.abrupt("break",70);case 42:return e.next=44,H();case 44:return e.abrupt("break",70);case 45:if(i=n[1],!(void 0==i||i.length<1||i.length>21)){e.next=49;break}return y="ERROR(Cmd): Filename",e.abrupt("break",70);case 49:return p=-1,D=i,e.next=53,M("N:"+i);case 53:if(!y){e.next=55;break}return e.abrupt("break",70);case 55:if(!(p<0)){e.next=58;break}return y="ERROR(SysCmd): No File",e.abrupt("break",70);case 58:if(Z('Get File "'+i+'": Total Len: '+p+" Bytes"),o=p,c=0,n[2]&&(c=parseInt(n[2]),o=n[3]?parseInt(n[3]):p-c),!(c<0||o<1||c+o>p)){e.next=65;break}return y="ERROR(SysCmd): Out of range of File",e.abrupt("break",70);case 65:return e.next=67,X(c,o);case 67:return y||W(),e.abrupt("break",70);case 69:y="ERROR(SysCmd): Command unknown";case 70:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function H(){return q.apply(this,arguments)}function q(){return q=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M("~",5e3);case 2:if(!y){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,M("T",5e3);case 6:if(!y){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,M("v",1e4);case 10:if(!y){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,M("CS",5e3);case 14:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function X(e,t){return J.apply(this,arguments)}function J(){return J=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(n>1e3)){e.next=5;break}return e.next=3,M("C"+B,32e3);case 3:if(!y){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,M("G "+n+" "+t,6e5);case 7:if(!(n>1e3)){e.next=12;break}return e.next=10,M("CS",1e4);case 10:if(!y){e.next=12;break}return e.abrupt("return");case 12:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function W(){if(void 0!=c&&c)if(void 0!=l&&l.length==o)try{var e=D.lastIndexOf("."),t="application/octet-binary";if(e>1)switch(D.substr(e).toLowerCase()){case".jpg":t="image/jpeg";break;case".csv":t="application/csv;charset=utf-8";break;case".pdf":t="application/pdf";break;case".txt":case".log":t="text/plain;charset=utf-8";break}var n=new Blob([l],{type:t});saveAs(n,D),Z("Export '"+D+"'")}catch(r){Z("ERROR: Export failed!","t_err")}else alert("ERROR: Inconsistent Data");else alert("ERROR: No Data to export")}var z,K,Y=15,Q=[];function Z(t){void 0!=t?Q.push(t):Q[0]="*** BLX Terminal "+e+" ***";while(Q.length>z)Q.shift();void 0!=K&&(document.getElementById("blxTerminalOut").innerText=Q.join("\n"))}function ee(e){13===e.keyCode||10===e.keycode?(e.preventDefault(),document.getElementById("blxTerminalSend").click()):27===e.keyCode&&(e.preventDefault(),document.getElementById("blxTerminalCmd").value="")}function te(e){void 0!=K&&(document.getElementById("blxTerminalSend").disabled=!e)}function ne(){return re.apply(this,arguments)}function re(){return re=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.getElementById("blxTerminalCmd"),n=t.value.trim(),t.value="",t.focus(),Z("> "+n),te(!1),y=0,!n.startsWith(".")){e.next=12;break}return e.next=10,U(n.substr(1));case 10:e.next=14;break;case 12:return e.next=14,M(n);case 14:y&&Z(y),te(!0);case 16:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y;void 0!=e?(z=t,K=document.getElementById(e),K.innerHTML="<div id='blxTerminalOut' style='border: 1px solid blue; margin: 3px'></div><div>Cmd: &gt <input id='blxTerminalCmd' typ='text' style='width: 80%;' maxlength='80'> <button id='blxTerminalSend'>Send</button></div>",document.getElementById("blxTerminalCmd").addEventListener("keyup",ee),document.getElementById("blxTerminalSend").addEventListener("click",ne),document.getElementById("blxTerminalCmd").focus(),Z(),te(!0)):(void 0!=K&&(K.innerHTML=""),K=void 0)}function ne(){return ie.apply(this,arguments)}function ie(){return ie=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.getElementById("blxTerminalCmd"),n=t.value.trim(),t.value="",t.focus(),Z("> "+n),te(!1),y=0,!n.startsWith(".")){e.next=12;break}return e.next=10,U(n.substr(1));case 10:e.next=14;break;case 12:return e.next=14,M(n);case 14:y&&Z(y),te(!0);case 16:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y;void 0!=e?(z=t,K=document.getElementById(e),K.innerHTML="<div id='blxTerminalOut' style='border: 1px solid blue; margin: 3px'></div><div>Cmd: &gt <input id='blxTerminalCmd' typ='text' style='width: 80%;' maxlength='80'> <button id='blxTerminalSend'>Send</button></div>",document.getElementById("blxTerminalCmd").addEventListener("keyup",ee),document.getElementById("blxTerminalSend").addEventListener("click",ne),document.getElementById("blxTerminalCmd").focus(),Z(),te(!0)):(void 0!=K&&(K.innerHTML=""),K=void 0)}function oe(e){return ce.apply(this,arguments)}function ce(){return ce=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.trim(),Z("=> "+n),y=0,!n.startsWith(".")){e.next=8;break}return e.next=6,U(n.substr(1));case 6:e.next=10;break;case 8:return e.next=10,M(n);case 10:return y&&Z(y),e.abrupt("return",0);case 12:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}return n(),{setTerminal:function(e,t){return ae(e,t)},userSendCmd:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe(t);case 2:if(!y){e.next=6;break}throw y;case 6:return e.abrupt("return",0);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getInfileBytebuf:function(){return l},getDevice:function(){return r}}}(),u=(n("72bc"),{name:"Terminal",mounted:function(){},data:function(){return{notifications:!1,sound:!0,widgets:!1}},watch:{open:function(e,t){e!==t&&!0===e&&this.$nextTick((function(){l.setTerminal("term")}))}},props:["open","closeTerminal"]}),d=u,p=n("2877"),v=n("6544"),f=n.n(v),b=n("8336"),m=n("b0af"),h=n("169a"),g=n("132d"),x=n("0fd9"),y=n("2fa4"),w=n("71d9"),k=n("2a7f"),R=Object(p["a"])(d,o,c,!1,null,null,null),C=R.exports;f()(R,{VBtn:b["a"],VCard:m["a"],VDialog:h["a"],VIcon:g["a"],VRow:x["a"],VSpacer:y["a"],VToolbar:w["a"],VToolbarItems:k["a"],VToolbarTitle:k["b"]});var O={name:"App",components:{Terminal:C},data:function(){return{terminalOpen:!1,notInstalled:!0,checkBluetoothAvailability:!0,bluetoothAvailable:!1}},created:function(){var e=this;"undefined"===typeof window.navigator.bluetooth&&(this.checkBluetoothAvailability=!1,this.bluetoothAvailable=!1),navigator.bluetooth.getAvailability().then((function(t){e.bluetoothAvailable=t})).finally((function(){e.checkBluetoothAvailability=!1})),"onavailabilitychanged"in navigator.bluetooth&&navigator.bluetooth.addEventListener("availabilitychanged",(function(e){this.bluetoothAvailable=e.value,console.log("> Bluetooth is ".concat(e.value?"available":"unavailable"))}))},methods:{doubleClick:function(e){e.preventDefault(),e.target.dataset.double?this.openTerminal():(e.target.dataset.double=!0,setTimeout((function(){delete e.target.dataset.double}),1e3))},openTerminal:function(){this.terminalOpen=!0},installApp:function(){this.notInstalled=!1}}},T=O,D=(n("034f"),n("0798")),E=n("7496"),S=n("40dc"),B=n("0789"),I=n("553a"),_=n("f6c4"),A=Object(p["a"])(T,a,i,!1,null,null,null),L=A.exports;f()(A,{VAlert:D["a"],VApp:E["a"],VAppBar:S["a"],VBtn:b["a"],VFadeTransition:B["c"],VFooter:I["a"],VIcon:g["a"],VMain:_["a"],VSpacer:y["a"]});var V=n("9483");Object(V["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var j=n("f309"),F=n("da5b"),P=n.n(F);r["a"].use(j["a"]);var N=new j["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#001e67",secondary:"#eceff1",accent:"#FFA823",error:"#a6001f",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},lang:{locales:{en:P.a},current:"en"}}),M=(n("d5e8"),n("5363"),n("8c4f")),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{staticClass:"text-center"},[n("v-col",[n("v-card",{staticClass:"mx-auto",attrs:{flat:"",tile:""}},[n("v-list",{staticClass:"mb-2 pt-0",attrs:{outlined:""}},[n("v-list-item",{staticClass:"accent--text font-weight-black",attrs:{"two-line":"",ripple:!e.isBluetoothAvailable,disabled:!e.isBluetoothAvailable,color:"accent"},on:{click:e.openConnectionPopup}},[n("v-list-item-avatar",[n("v-icon",{staticClass:"accent white--text"},[e._v("mdi-plus")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"accent--text font-weight-black text-left"},[e._v("Live Connection")]),n("v-list-item-subtitle",{staticClass:"accent--text font-weight-regular text-left"},[e._v("Search for a new Bluetooth device and open a live connection")])],1)],1),n("v-divider"),n("v-subheader",[e._v("DATA STORE")]),n("v-list-item-group",{attrs:{color:"primary"},model:{value:e.selectedDevice,callback:function(t){e.selectedDevice=t},expression:"selectedDevice"}},e._l(e.devices,(function(t,r){return n("v-list-item",{key:r,on:{dblclick:function(t){return e.openDevice(t,r)}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-bluetooth")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"text-left",domProps:{textContent:e._s(t.name)}})],1)],1)})),1)],1)],1),n("v-fade-transition",["number"===typeof e.selectedDevice?n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"8",sm:"10"}},[n("v-btn",{attrs:{color:"accent",depressed:"",block:""},on:{click:e.readDeviceData}},[e._v("Read data")])],1),n("v-col",{attrs:{cols:"4",sm:"2"}},[n("v-btn",{attrs:{block:"",depressed:"",color:"error"},on:{click:e.deleteDevice}},[n("v-icon",[e._v("mdi-delete")])],1)],1)],1):e._e()],1)],1)],1),e.connectionPopup?n("connection-popup",{attrs:{device:e.device,open:e.connectionPopup,close:e.closeConnectionPopup}}):e._e()],1)},U=[],G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{value:e.open,persistent:""}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Connected to Device: "+e._s(e.device.name))]),n("v-card-text",[n("v-row",{staticClass:"pb-4",attrs:{dense:""}},[n("v-col",{staticClass:"py-1",attrs:{xs:"12",sm:"4",cols:"12"}},[n("v-text-field",{attrs:{"background-color":"blue-grey lighten-5",dense:"","hide-details":"",readonly:"",label:"Temp.",placeholder:"32.5 Â°C",filled:""}})],1),n("v-col",{staticClass:"py-1",attrs:{xs:"12",sm:"4",cols:"12"}},[n("v-text-field",{attrs:{"background-color":"blue-grey lighten-5",dense:"","hide-details":"",readonly:"",label:"Pressure",placeholder:"x hPa",filled:""}})],1),n("v-col",{staticClass:"py-1",attrs:{xs:"12",sm:"4",cols:"12"}},[n("v-text-field",{attrs:{"background-color":"blue-grey lighten-5",dense:"","hide-details":"",readonly:"",label:"Battery",placeholder:"2.2 V",color:"primary","append-outer-icon":"mdi-refresh",filled:""},on:{"click:append":function(t){return e.alert("test")}}})],1),n("v-btn",{staticClass:"my-5",attrs:{big:"",depressed:"",block:"",color:"accent",disabled:e.loadingData,loading:e.loadingData},on:{click:e.fetchData}},[e._v("Fetch Data from Logger")])],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.close}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-delete")]),e._v("Delete Data on Logger ")],1),n("v-btn",{attrs:{color:"grey",text:""},on:{click:e.close}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-settings")]),e._v("Change Parameters ")],1),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.close}},[e._v("Close")])],1)],1)],1)],1)},H=[],q={data:function(){return{loadingData:!1}},mounted:function(){},methods:{fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loadingData=!0,t.next=4,l.userSendCmd(".g data.edt");case 4:return t.next=6,l.getInfileBytebuf();case 6:n=t.sent,r=new TextDecoder("utf-8").decode(n),a={name:e.device.name,id:e.device.id,log:[],lastFetch:(new Date).toISOString(),data:r},e.$store.commit("upsertDevice",a),e.close(),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:return t.prev=15,e.loadingData=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,13,15,18]])})))()}},props:["close","open","device"]},X=q,J=n("99d9"),W=n("62ad"),z=n("8654"),K=Object(p["a"])(X,G,H,!1,null,null,null),Y=K.exports;f()(K,{VBtn:b["a"],VCard:m["a"],VCardActions:J["a"],VCardText:J["b"],VCardTitle:J["c"],VCol:W["a"],VDialog:h["a"],VIcon:g["a"],VRow:x["a"],VSpacer:y["a"],VTextField:z["a"]});var Q="5c170001-b5a3-f393-e0a9-a37f42997c22",Z={name:"Landing",data:function(){return{selectedDevice:null,connectionPopup:!1,device:null}},computed:{devices:function(){return this.$store.state.devices}},components:{ConnectionPopup:Y},methods:{openConnectionPopup:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.userSendCmd(".c");case 3:e.device=l.getDevice(),e.connectionPopup=!0,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),"ERROR(Cmd): Already connected!"===t.t0&&(e.device=l.getDevice(),e.connectionPopup=!0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},closeConnectionPopup:function(){this.connectionPopup=!1},deleteDevice:function(){this.$store.commit("removeDevice",this.selectedDevice)},openDevice:function(e,t){this.$router.push("device/"+this.devices[t].id)},readDeviceData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("device/"+e.devices[e.selectedDevice].id);case 1:case"end":return t.stop()}}),t)})))()},addBleDevice:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isBluetoothAvailable){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,navigator.bluetooth.requestDevice({filters:[{services:[Q]}]});case 5:n=t.sent,r={name:n.name,id:n.id,log:[],lastSeen:(new Date).toISOString(),lastFetch:null,data:[]},e.$store.commit("setCurrentServer",n),e.$store.commit("upsertDevice",r),e.$router.push("device/"+n.id),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),console.warn(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()}},props:["isBluetoothAvailable"]},ee=Z,te=(n("cbf6"),n("a523")),ne=n("ce7e"),re=n("8860"),ae=n("da13"),ie=n("8270"),oe=n("5d23"),ce=n("1baa"),se=n("34c3"),le=n("e0c7"),ue=Object(p["a"])(ee,$,U,!1,null,null,null),de=ue.exports;f()(ue,{VBtn:b["a"],VCard:m["a"],VCol:W["a"],VContainer:te["a"],VDivider:ne["a"],VFadeTransition:B["c"],VIcon:g["a"],VList:re["a"],VListItem:ae["a"],VListItemAvatar:ie["a"],VListItemContent:oe["a"],VListItemGroup:ce["a"],VListItemIcon:se["a"],VListItemSubtitle:oe["b"],VListItemTitle:oe["c"],VRow:x["a"],VSubheader:le["a"]});var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",{staticClass:"blue-grey lighten-5",attrs:{elevation:"1",dense:""}},[n("v-btn",{attrs:{icon:""},on:{click:e.goBack}},[n("v-icon",[e._v("mdi-arrow-left")])],1),n("v-toolbar-title",[n("span",{staticClass:"hidden-xs-only"},[e._v("Device")]),e._v(" "+e._s(e.device.name)+" "),n("span",{staticClass:"grey--text d-none d-md-inline"},[e._v("["+e._s(e.device.id)+"]")])]),n("v-spacer"),n("v-btn",{attrs:{icon:""}},[n("v-icon",[e._v("mdi-settings")])],1),n("v-btn",{attrs:{icon:"",color:"error"}},[n("v-icon",[e._v("mdi-delete")])],1)],1),n("v-container",{staticClass:"device"},[n("h5",{staticClass:"primary--text text-left mt-2"},[e._v("Last Log")]),n("pre",{staticClass:"primary--text"},[e._v("      "+e._s(e.device.data)+"\n    ")]),n("v-card",[n("v-card-title",[n("v-btn",{attrs:{disabled:""}},[e._v("Download Log")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-data-table",{attrs:{headers:e.headers,items:e.measurements,search:e.search}})],1)],1)],1)},ve=[],fe=(n("7db0"),{data:function(){return{search:"",headers:[{text:"Date / Time",align:"start",value:"dateTime"},{text:"Temperature (Â°C)",value:"temp"},{text:"Pressure (hPa)",value:"pressure"},{text:"Battery (V)",value:"battery"}],measurements:[{dateTime:new Date,temp:32.5,pressure:12.2,battery:2.2},{dateTime:new Date,temp:30,pressure:11.2,battery:2.2},{dateTime:new Date,temp:30.5,pressure:10.5,battery:2.2},{dateTime:new Date,temp:28.3,pressure:12.2,battery:2.2},{dateTime:new Date,temp:17.5,pressure:12.2,battery:2.2},{dateTime:new Date,temp:32.5,pressure:12.2,battery:2.2}]}},methods:{goBack:function(){this.$router.go(-1)}},computed:{device:function(){var e=this;return this.$store.state.devices.find((function(t){return t.id===e.$route.params.id}))}}}),be=fe,me=n("8fea"),he=Object(p["a"])(be,pe,ve,!1,null,null,null),ge=he.exports;f()(he,{VBtn:b["a"],VCard:m["a"],VCardTitle:J["c"],VContainer:te["a"],VDataTable:me["a"],VIcon:g["a"],VSpacer:y["a"],VTextField:z["a"],VToolbar:w["a"],VToolbarTitle:k["b"]}),r["a"].use(M["a"]);var xe=[{path:"/",name:"Landing",component:de},{path:"/device/:id",name:"Device",component:ge}],ye=new M["a"]({routes:xe}),we=ye,ke=(n("99af"),n("c740"),n("a434"),n("2909")),Re=n("2f62");r["a"].use(Re["a"]);var Ce="BLX_2020_",Oe=new Re["a"].Store({state:{isBluetoothAvailable:!1,currentServer:null,devices:[]},mutations:{initialiseStore:function(e){var t=localStorage.getItem(Ce+"devices");if("string"===typeof t)try{var n=JSON.parse(t);Array.isArray(n)&&(e.devices=n)}catch(r){}},upsertDevice:function(e,t){if(t){var n=e.devices.findIndex((function(e){return e.name===t.name&&e.id===t.id}));if(-1!==n){var r=Object(ke["a"])(e.devices);r[n]=t,e.devices=r}else e.devices=[].concat(Object(ke["a"])(e.devices),[t]);localStorage.setItem(Ce+"devices",JSON.stringify(e.devices))}},removeDevice:function(e,t){e.devices.splice(t,1),e.devices=Object(ke["a"])(e.devices),localStorage.setItem(Ce+"devices",JSON.stringify(e.devices))},setCurrentServer:function(e,t){t&&(e.currentServer=t)}},actions:{},modules:{}});r["a"].config.productionTip=!1,new r["a"]({vuetify:N,router:we,store:Oe,beforeCreate:function(){this.$store.commit("initialiseStore")},render:function(e){return e(L)}}).$mount("#app")},"72bc":function(e,t,n){(function(t){n("b0c0"),n("ac1f"),n("5319");var r=n("7037"),a="object"===("undefined"===typeof window?"undefined":r(window))&&window.window===window?window:"object"===("undefined"===typeof self?"undefined":r(self))&&self.self===self?self:"object"===("undefined"===typeof t?"undefined":r(t))&&t.global===t?t:this;function i(e,t){return"undefined"===typeof t?t={autoBom:!1}:"object"!==r(t)&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function o(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function c(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l=a.saveAs||("object"!==("undefined"===typeof window?"undefined":r(window))||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=a.URL||a.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"===typeof e?(i.href=e,i.origin!==location.origin?c(i.href)?o(e,t,n):s(i,i.target="_blank"):s(i)):(i.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){s(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"===typeof e)if(c(e))o(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){s(r)}))}else navigator.msSaveOrOpenBlob(i(e,n),t)}:function(e,t,n,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"===typeof e)return o(e,t,n);var c="application/octet-stream"===e.type,s=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||c&&s)&&"object"===("undefined"===typeof FileReader?"undefined":r(FileReader))){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,p=d.createObjectURL(e);i?i.location=p:location.href=p,i=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});a.saveAs=l.saveAs=l,e.exports=l}).call(this,n("c8ba"))},"7ee4":function(e,t,n){},"8a23":function(e,t,n){},cbf6:function(e,t,n){"use strict";var r=n("7ee4"),a=n.n(r);a.a}});
//# sourceMappingURL=app.732baa4b.js.map